为了确定哪个路径才是最有效的以及防止多条链的产生，以太坊使用了一个叫做“GHOST 协议"的数学机制。
 
GHOST = Greedy Heaviest Observed Subtree
 
简单来说，GHOST 协议就是让我们必须选择一个在其上完成计算最多的路径。
一个方法确定路径就是使用最近一个区块（叶子区块）的区块号，区块号代表着当前路径上总的区块数（不包含创世纪区块）。区块号越大，路径就会越长，就说明越多的挖矿算力被消耗在此路径上以达到叶子区块。

以太坊的本质就是一个基于交易的状态机transaction-based state machine。在计算机科学中，状态机 是指可以读取一系列的输入，然后根据这些输入，会转换成一个新的状态出来的东西。
 
根据以太坊的状态机，我们从创世纪状态genesis state开始。这差不多类似于一片空白的石板，在网络中还没有任何交易的产生状态。当交易被执行后，这个创世纪状态就会转变成最终状态。在任何时刻，这个最终状态都代表着以太坊当前的状态。
 
以太坊的状态有百万个交易。这些交易都被“组团”到一个区块中。一个区块包含了一系列的交易，每个区块都与它的前一个区块链接起来。
 
为了让一个状态转换成下一个状态，交易必须是有效的。为了让一个交易被认为是有效的，它必须要经过一个验证过程，此过程也就是挖矿。挖矿就是一组节点（即电脑）用它们的计算资源来创建一个包含有效交易的区块出来。
 
任何在网络上宣称自己是矿工的节点都可以尝试创建和验证区块。世界各地的很多矿工都在同一时间创建和验证区块。每个矿工在提交一个区块到区块链上的时候都会提供一个数学机制的“证明”，这个证明就像一个保证：如果这个证明存在，那么这个区块一定是有效的。
 
为了让一个区块添加到主链上，一个矿工必须要比其他矿工更快的提供出这个“证明”。通过矿工提供的一个数学机制的“证明”来证实每个区块的过程称之为工作量证明proof of work。
 
证实了一个新区块的矿工都会被奖励一定价值的奖赏。奖赏是什么？以太坊使用一种内在数字代币——以太币Ether作为奖赏。每次矿工证明了一个新区块，那么就会产生一个新的以太币并被奖励给矿工。
 
你也许会在想：什么能确保每个人都只在区块的同一条链上呢？我们怎么能确定不会存在一部分矿工创建一个他们自己的链呢？
 
前面，我们定义了区块链就是一个具有共享状态的交易单机。使用这个定义，我们可以知道正确的当前状态是一个全球真相，所有人都必须要接受它。拥有多个状态（或多个链）会摧毁这个系统，因为它在哪个是正确状态的问题上不可能得到统一结果。如果链分叉了，你有可能在一条链上拥有 10 个币，一条链上拥有 20 个币，另一条链上拥有 40 个币。在这种场景下，是没有办法确定哪个链才是最”有效的“。
 
不论什么时候只要多个路径产生了，一个”分叉“就会出现。我们通常都想避免分叉，因为它们会破坏系统，强制人们去选择哪条链是他们相信的链。
 
为了确定哪个路径才是最有效的以及防止多条链的产生，以太坊使用了一个叫做“GHOST 协议"的数学机制。
 
GHOST = Greedy Heaviest Observed Subtree
 
简单来说，GHOST 协议就是让我们必须选择一个在其上完成计算最多的路径。一个方法确定路径就是使用最近一个区块（叶子区块）的区块号，区块号代表着当前路径上总的区块数（不包含创世纪区块）。区块号越大，路径就会越长，就说明越多的挖矿算力被消耗在此路径上以达到叶子区块。使用这种推理就可以允许我们赞同当前状态的权威版本。
 
现在你大概对区块链是什么有个理性的认识，让我们在再深入地了解一下以太坊系统主要组成部分：
 
账户accounts
 
状态state
 
损耗和费用gas and fees
 
交易transactions
 
区块blocks
 
交易执行transaction execution
 
挖矿mining
 
工作量证明proof of work
 
在开始之前需要注意的是：每当我说某某的哈希， 我指的都是 KECCAK-256 哈希，以太坊就是使用这个哈希算法。
